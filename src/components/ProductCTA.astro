---
interface Props {
  variant?: 'full' | 'compact';
  utmSource?: string;
  utmMedium?: string;
  utmCampaign?: string;
  image?: string;
}

const {
  variant = 'full',
  utmSource = 'blog',
  utmMedium = 'cta_content',
  utmCampaign = 'homepage',
  image,
} = Astro.props;

const utmParams = `?utm_source=${utmSource}&utm_medium=${utmMedium}&utm_campaign=${utmCampaign}`;
const maquininhasUrl = `https://modopag.com.br/maquininhas${utmParams}`;
const taxasUrl = `https://modopag.com.br/taxas${utmParams}`;

// Default maquininha image
const maquininhaImage = image || '/blog/images/maquininhas/Maquininhas.png';
---

{variant === 'full' && (
  <section class="py-12 md:py-16">
    <div class="relative overflow-hidden bg-gradient-to-br from-primary-400 via-primary-500 to-primary-600 rounded-3xl">
      <!-- Background decoration -->
      <div class="absolute inset-0 opacity-20">
        <div class="absolute -right-20 -top-20 w-80 h-80 rounded-full bg-white/20 blur-3xl" />
        <div class="absolute -left-10 -bottom-10 w-60 h-60 rounded-full bg-white/10 blur-2xl" />
      </div>

      <div class="relative grid md:grid-cols-2 gap-8 p-8 md:p-12 lg:p-16 items-center">
        <!-- Text content -->
        <div class="flex flex-col justify-center">
          <span class="inline-flex items-center gap-2 px-3 py-1.5 bg-secondary-500/20 text-secondary-700 text-sm font-semibold rounded-full w-fit mb-6">
            <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z" />
            </svg>
            As menores taxas do Brasil
          </span>

          <h2 class="text-3xl md:text-4xl lg:text-5xl font-bold text-secondary-700 mb-4">
            Conheça as maquininhas modoPAG
          </h2>

          <p class="text-lg text-secondary-600 mb-8">
            Taxas a partir de <span class="font-bold">1,09%</span> no débito e crédito.
            Sem faturamento mínimo ou aluguel. Receba em até 1 dia útil.
          </p>

          <div class="flex flex-wrap gap-4">
            <a
              href={maquininhasUrl}
              target="_blank"
              rel="noopener noreferrer"
              class="inline-flex items-center gap-2 px-6 py-3 bg-secondary-600 hover:bg-secondary-700 text-white font-semibold rounded-lg transition-colors shadow-lg"
              data-no-instant
            >
              Ver maquininhas
              <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 8l4 4m0 0l-4 4m4-4H3" />
              </svg>
            </a>

            <a
              href={taxasUrl}
              target="_blank"
              rel="noopener noreferrer"
              class="inline-flex items-center gap-2 px-6 py-3 border-2 border-secondary-600/30 hover:border-secondary-600/50 text-secondary-700 font-semibold rounded-lg transition-colors"
              data-no-instant
            >
              Simular taxas
            </a>
          </div>

          <!-- Trust badges - 2 Diferenciais modoPAG -->
          <div class="flex flex-wrap items-center gap-6 mt-8 pt-8 border-t border-secondary-600/20">
            <div class="flex items-center gap-2 text-secondary-600 text-sm">
              <svg class="w-5 h-5 text-secondary-700" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z" />
              </svg>
              <span>CPF ou CNPJ</span>
            </div>
            <div class="flex items-center gap-2 text-secondary-600 text-sm">
              <svg class="w-5 h-5 text-secondary-700" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 10h18M7 15h1m4 0h1m-7 4h12a3 3 0 003-3V8a3 3 0 00-3-3H6a3 3 0 00-3 3v8a3 3 0 003 3z" />
              </svg>
              <span>Parcele em até 18x</span>
            </div>
          </div>
        </div>

        <!-- Maquininha Image -->
        <div class="flex items-center justify-center order-first md:order-last">
          <div class="relative">
            <img
              src={maquininhaImage}
              alt="Maquininha modoPAG"
              class="w-64 md:w-80 lg:w-96 h-auto drop-shadow-2xl transform -rotate-6 hover:rotate-0 transition-transform duration-500"
              loading="lazy"
            />
            <!-- Floating badge -->
            <div class="absolute -top-2 -right-2 md:-top-4 md:-right-4 bg-green-500 text-white px-4 py-2 rounded-full font-bold shadow-lg transform rotate-12 text-sm md:text-base">
              Sem aluguel!
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>
)}

{variant === 'compact' && (
  <section class="py-8">
    <div class="bg-gradient-to-r from-primary-400 to-primary-500 rounded-2xl p-6 md:p-8 flex flex-col md:flex-row items-center justify-between gap-6">
      <div class="flex items-center gap-4">
        <img
          src={maquininhaImage}
          alt="Maquininha modoPAG"
          class="w-16 h-auto drop-shadow-lg hidden sm:block"
          loading="lazy"
        />
        <div>
          <h3 class="text-lg font-bold text-secondary-700">
            Maquininha com as menores taxas
          </h3>
          <p class="text-secondary-600 text-sm">
            A partir de 1,09%. Sem faturamento mínimo ou aluguel.
          </p>
        </div>
      </div>

      <a
        href={maquininhasUrl}
        target="_blank"
        rel="noopener noreferrer"
        class="inline-flex items-center gap-2 px-5 py-2.5 bg-secondary-600 hover:bg-secondary-700 text-white font-semibold rounded-lg transition-colors whitespace-nowrap shadow-lg"
        data-no-instant
      >
        Conhecer modoPAG
        <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 8l4 4m0 0l-4 4m4-4H3" />
        </svg>
      </a>
    </div>
  </section>
)}
